<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      template="/WEB-INF/template/mestre.xhtml">
   	<ui:define name="centro">
    	<h:form id="formCompra" role="form" >
        <!--
         NOTA: para capturar o caminho relativo do projeto, usa-se:
            #[request.contextPath}/<DIRETORIO>/..
        -->
        <section class="lightSection clearfix pageHeader">
	        <div class="container">
	          <div class="row">
	            <div class="col-sm-6">
	              <div class="page-title">
	                <h2>Fechar a compra</h2>
	              </div>
	            </div>
	            <div class="col-sm-6">
	              <ol class="breadcrumb">
	                <li>
	                  <h:commandLink action="#{clienteMB.paginaPrincipal}">INÍCIO</h:commandLink>
	                </li>
	                <li class="active">INFORMAÇÕES DA COMPRA</li>
	              </ol>
	            </div>
	          </div>
	        </div>
	    </section>
	    
        <section class="mainContent clearfix stepsWrapper">
	        <div class="container">
	          <div class="row">
	            <div class="col-md-8">
	              <div class="innerWrapper clearfix stepsPage">
	                <div class="row progress-wizard" style="border-bottom:0;">
	              		<div class="col-xs-3 progress-wizard-step active">
                    		<div class="text-center progress-wizard-stepnum">Dados do Comprador</div>
                    		<div class="progress"><div class="progress-bar"></div></div>
                    		<h:commandLink action="#{clienteMB.primeiroPassoCompra}" class="progress-wizard-dot"/>
                  		</div>
		
                    	<div class="col-xs-3 progress-wizard-step disabled">
		                    <div class="text-center progress-wizard-stepnum">Meio de Pagamento</div>
		                    <div class="progress"><div class="progress-bar"></div></div>
		                    <h:commandLink class="progress-wizard-dot"/>
		                </div>
		
		                <div class="col-xs-3 progress-wizard-step disabled">
		                    <div class="text-center progress-wizard-stepnum">Confirmação</div>
		                    <div class="progress"><div class="progress-bar"></div></div>
		                    <h:commandLink class="progress-wizard-dot"/>
		                </div>
	                </div>
	                
	                <div class="form-group col-sm-12 col-12">
	                	<small style="color: red">(*) Obrigatório</small>
	                </div>
	                
	                <div class="col-12">
	                	<div class="page-header">
	                      <h4>Dados pessoais</h4>
	                    </div>
	                </div>
                  
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">Nome Completo</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputText id="nomeCompleto" class="form-control" value="#{clienteMB.cliente.nomeCompleto}" required="true" requiredMessage="Nome Completo obrigatório"/>
	                    <p:message for="nomeCompleto" display="text"/>
	                </div>
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">CPF</label>&nbsp;<span style="color: red">*</span>&nbsp;&nbsp;<h:outputText escape="false" id="tmpMsgCPF" value="#{clienteMB.msgCPF}" style="color: red; font-weight: bold"/>
	                    <p:inputMask id="cpf" class="form-control" value="#{clienteMB.cliente.nrCpf}" required="true" requiredMessage="CPF obrigatório" mask="999.999.999-99">
	                    	<f:ajax event="blur" listener="#{clienteMB.validarNumeroCPF}" render="tmpMsgCPF"/>
	                    </p:inputMask>
	                    <p:message for="cpf" display="text"/>
	                </div>
	                <div class="form-group col-sm-6 col-12">
	                	<label for="">RG</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputText id="rg" class="form-control" value="#{clienteMB.cliente.nrRG}" required="true" requiredMessage="RG obrigatório"/>
	                    <p:message for="rg" display="text"/>
	                </div>
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">Data de Nascimento</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputMask id="tmpDtNascimento" class="form-control datepicker" value="#{clienteMB.cliente.tmpDtNascimento}" mask="99/99/9999" required="true" requiredMessage="Data de Nascimento obrigatório"/>
	                    <p:message for="tmpDtNascimento" display="text"/>
	                </div>
	                <div class="form-group col-sm-6 col-12">
	                	<label for="">Telefone (celular)</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputMask id="nrTelefone" class="form-control" value="#{clienteMB.cliente.nrTelefone}" mask="(99) 99999-9999" required="true" requiredMessage="Telefone obrigatório"/>
	                    <p:message for="nrTelefone" display="text"/>
	                </div>
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">E-mail</label>&nbsp;<span style="color: red">*</span>
	                    <h:inputText id="email" class="form-control" value="#{clienteMB.cliente.email}" style="text-transform: lowercase !important" required="true" requiredMessage="E-mail obrigatório"/>
	                    <p:message for="email" display="text"/>
	                </div>
                  	
                  	<!-- xx -->
                  	<div class="col-12">
	                	<div class="page-header">
	                      <h4>Dados de entrega</h4>
	                    </div>
	                </div>
                  	
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">CEP</label>&nbsp;<span style="color: red">*</span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.buscacep.correios.com.br/sistemas/buscacep/" target="_blank" style="color: #00008B !important"><small>Não sei meu CEP</small></a>
	                    <p:inputMask id="cep" class="form-control" value="#{clienteMB.cliente.endereco.cep}" mask="99999-999" required="true" requiredMessage="CEP obrigatório">
	                    	<f:ajax event="blur" listener="#{clienteMB.procuraPorCEP}" render="tmpRua tmpCidade tmpEstado tmpBairro"/>
	                    </p:inputMask>
	                    <p:message for="cep" display="text"/>
	                </div>
	                <div class="form-group col-sm-6 col-12">
	                	<label for="">Rua</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputText id="tmpRua" class="form-control" value="#{clienteMB.tmpRua}" required="true" requiredMessage="Rua obrigatório"/>
	                    <p:message for="tmpRua" display="text"/>
	                </div>
	                <div class="form-group col-sm-6 col-12">
	                	<label for="">Cidade</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputText id="tmpCidade" class="form-control" value="#{clienteMB.tmpCidade}" required="true" requiredMessage="Cidade obrigatório"/>
	                    <p:message for="tmpCidade" display="text"/>
	                </div>
	                <div class="form-group col-sm-6 col-12">
	                	<label for="">Bairro</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputText id="tmpBairro" class="form-control" value="#{clienteMB.tmpBairro}" required="true" requiredMessage="Bairro obrigatório"/>
	                    <p:message for="tmpBairro" display="text"/>
	                </div>
	                <div class="form-group col-sm-6 col-12">
	                	<label for="">Estado</label>&nbsp;<span style="color: red">*</span>
	                	<h:selectOneMenu id="tmpEstado" value="#{clienteMB.tmpEstado}" class="form-control" required="true" requiredMessage="Estado obrigatório">
	                		<c:forEach var="estado" items="#{clienteMB.estados}">
	                			<f:selectItem itemValue="#{estado.key}" itemLabel="#{estado.value}"/>
	                		</c:forEach>
	                	</h:selectOneMenu>
	                	<p:message for="tmpEstado" display="text"/>
	                </div>
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">Número</label>&nbsp;<span style="color: red">*</span>
	                    <p:inputText id="numero" class="form-control" value="#{clienteMB.cliente.endereco.numero}" required="true" requiredMessage="Número obrigatório"/>
	                    <p:message for="numero" display="text"/>
	                </div>
                  	<div class="form-group col-sm-6 col-12">
	                	<label for="">Complemento</label>
	                    <h:inputText id="complemento" class="form-control" value="#{clienteMB.cliente.endereco.complemento}" maxlength="200"/>
	                </div>
	                
	                <div class="row">
		                <div class="col-sm-12 col-12">
		                	<div class="page-header">
		                      <h4>Modo de envio</h4>
		                    </div>
		                </div>
		                
		                <div class="form-group col-12 col-sm-12 mb-5">
		                	<h:selectOneRadio value="#{clienteMB.cliente.endereco.modoEnvio}">
		                		<f:selectItem itemValue="1" itemLabel="&nbsp;Frete Grátis"/>
		                	</h:selectOneRadio>
               				<small>Estimativa de 25 a 30 dias para entrega (previsão Correios)</small>
		                	<!-- 
	                    	<input id="freteGratis" type="radio" name="freteGratis" value="1" checked="true"/>
	                      	<label for="freteGratis"><span></span>Frete Grátis</label><br />
	                      	<small>Estimativa de 25 a 30 dias para entrega (previsão Correios)</small>
		                	-->
		                </div>

		                <div class="col-12 cols-sm-12 mb-5">
	                    	<ul class="pager">
	                        	<li class="next "><h:commandLink class="btn btn-lg btn-primary btn-pill" style="color: #337ab7 !important" href="checkout-step-2.html" action="#{clienteMB.segundoPassoCompra}">Continuar <i class="fa fa-angle-right"></i></h:commandLink></li>
	                      	</ul>
	                  	</div>
	                  	
		                <div class="col-sm-12 col-12">
		                	<small><i class="fa fa-info-circle"/>&nbsp;Informações gerais</small>
		                </div>
		                <div class="col-sm-12 col-12">
		                    <small>Ao comprar CONCORDO com os <h:commandLink action="#{clienteMB.termoUso}" value="termos de uso" style="color: #00008B !important"/> e a <h:commandLink action="#{clienteMB.politicaPrivacidade}" value="política de privacidade" style="color: #00008B !important"/>.</small>
		                </div>
                  	</div>
                  	
	              </div>
                </div>
                
                <div class="col-md-4">
	              <div class="summery-box">
	                <h4>Resumo da compra</h4>
		               <p>Olhe o que contabilizamos</p>
	                <ul class="list-unstyled">
	                  <li class="d-flex justify-content-between">
	                    <span class="tag">Subtotal:</span>
	                    <span class="val"><h:outputText escape="false" value="#{clienteMB.resumoSubtotal}"/></span>
	                  </li>
	                  <li class="d-flex justify-content-between">
	                    <span class="tag">Taxa de entrega:</span>
	                    <span class="val"><h:outputText escape="false" value="#{clienteMB.resumoCustoEntrega}"/></span>
	                  </li>
	                  <li class="d-flex justify-content-between">
	                    <span class="tag">Total:</span>
	                    <span class="val"><h:outputText escape="false" value="#{clienteMB.resumoTotal}"/></span>
	                  </li>
	                </ul>
	              </div>
	            </div>
	            
              </div>
            </div>
         </section>  
        
        </h:form>
		</ui:define>
    </ui:composition>
